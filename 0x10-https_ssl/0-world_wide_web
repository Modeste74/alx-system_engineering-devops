#!/usr/bin/env bash
# This script provides information about subdomains and their DNS records

declare -a subdomains=("www" "lb-01" "web-01" "web-02")

domain_info() {
    local query_domain="$1"
    local query_subdomain="$2"

    perform_query() {
        local sub="$1"
        local result
        result=$(dig "$sub.$query_domain" +short)
        echo "The subdomain $sub is a $(echo $result | awk '{print $4}') record and points to $result"
    }

    if [ -z "$query_subdomain" ]; then
        for sub in "${subdomains[@]}"; do
            perform_query "$sub"
        done
    else
        perform_query "$query_subdomain"
    fi
}

domain_info "$1" "$2"